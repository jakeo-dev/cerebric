<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Cerebric - A Memorization Game</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
    <link href="cerebric-logo-inverted.ico" rel="shortcut icon" type="image/ico">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <button id="devButton" onclick="devThing();">skip step</button>

    <ul id="navBar">

        <li class="navItem" id="titleItem">
            <div id="titleDiv">
                <h1 id="title"><a onclick="location.reload();">Cerebric</a></h1>
                <!-- Compete against yourself in a memorization game to quickly memorize text -->
            </div>
        </li>

        <li class="navItem" id="optionsItem">
            <div id="fullOptionsDiv">
                <button class="options" id="showOptions" onclick="showOps();"><i
                        class="fa-solid fa-ellipsis-vertical"></i>Options</button>
                <div id="optionsDiv">
                    <button class="options setting" id="ignorePunc" onclick="toggleIgPunc();"
                        title="Ignore punctuation when entering text">Ignore Punctuation: On</button>
                    <button class="options setting" id="autoSetGoal" onclick="toggleSetGoal();"
                        title="Automatically set a goal based on your past records">Auto Set Goal:
                        Off</button>
                    <button class="options setting" id="incorrectLimit" onclick="changeIncLim();"
                        title="Change the limit of incorrect answers you can enter before being able to show the text">Incorrect
                        Limit: 2</button>
                </div>
            </div>
        </li>

    </ul>

    <div id="bigGameBox" class="bigBox">

        <div id="gameBox" class="box">

            <button id="goalButton" onclick="setGoal();"><i class="fa-solid fa-bullseye"></i>Set Goal</button>

            <div id="enterMemDiv">
                <input id="memInput" type="text" placeholder="Enter text to memorize" autocomplete="off"></input>
                <!-- TO PREVENT COPYING: onCopy="return false" onDrag="return false" -->
                <!-- TO PREVENT PASTING: onPaste="return false" onDrop="return false" -->
                <h3 id="warning" class="subtext"></h3>
            </div>

            <div id="tryMemDiv">
                <h1 id="directions"></h1>

                <div id="memTextDiv">
                    <h2 class="memText" id="memText"></h2>
                    <input class="memText" id="memEditText"></input>

                    <button class="changeText" id="editMemText" onclick="editText();"><i
                            class="fa-solid fa-pen"></i></button>
                    <button class="changeText" id="saveMemText" onclick="saveText();"><i
                            class="fa-solid fa-check"></i></button>
                    <button class="changeText" id="closeMemText" onclick="closeText();"><i
                            class="fa-solid fa-xmark"></i></button>
                </div>

                <button id="speakText" onclick="speak();">Speak<i class="fa-solid fa-volume-high"></i></button>

                <div id="fullEnterTryMem">
                    <input id="tryMemInput" type="text" placeholder="Type the text again" oninput="start();"
                        autocomplete="off"></input>
                    <button id="enterTry" onclick="enterTry();">Enter</button>
                    <button id="resetTime" onclick="reset();">Reset<i
                            class="fa-solid fa-arrow-rotate-right"></i></button>
                    <button id="showText" onclick="showText();">Show Text</button>
                </div>

                <h3 id="time" class="subtext"></h3>
                <h3 id="status" class="subtext"></h3>
            </div>

            <div id="nextStepDiv">
                <button id="nextStep" onclick="nextStep();">Next<i class="fa-solid fa-arrow-right"></i></button>
            </div>

        </div>

        <div id="timesBox" class="box">

            <div id="timesTitleDiv">
                <h2 id="timesTitle"><i class="fa-solid fa-scroll"></i>Records</h2>
            </div>

            <div id="timesSubtextDiv">
                <h2 id="timesSubtext"></h2>
                <h2 id="timesAverage"></h2>
            </div>

            <div id="timesListDiv">
                <ul id="timesList">
                </ul>
            </div>

            <div id="goalsTitleDiv">
                <h2 id="goalsTitle"><i class="fa-solid fa-scroll"></i>Reached Goals</h2>
            </div>

            <div id="goalsSubtextDiv">
                <h2 id="goalsSubtext" class="listEl">None</h2>
            </div>

            <div id="goalsListDiv">
                <ul id="goalsList">
                </ul>
            </div>

        </div>

    </div>

</body>

<script>

    console.log("v1.1.3");
    console.log("whats new: \n **Additions** \n Edit text to memorize after setting it \n Text to memorize now shows with a highlight \n Added a favicon \n \n **Improvements** \n Auto reset goal removed, goals now always reset after reaching them \n Improvements to auto set goals \n Design improvements");

    let memText;
    let step = 1;
    let time = 0;
    let interval;
    let txt;
    let ret;
    let listItems;
    let incorrect = 0;
    let igPunc = true;
    let currentInput;
    let ogInput;
    let incLimit = 2;
    let goal;
    let matches;
    let acronym;
    let sum = 0;
    let average = 0;
    let icon;
    let sec;
    let goalSec;
    let auSeGo = false;
    let record;
    let recentTime;
    let j;
    let fasterThanAll = 0;

    var darkerGreen = "#368546"; /* correct */
    var lightRed = "#d14848" /*  new record / goal reached / record */
    var darkerRed = "#ad4337"; /* incorrect */

    /* document.getElementById("timesList").addEventListener("click", function (e) {
        var tgt = e.target;
        if (tgt.tagName.toUpperCase() == "LI") {
            tgt.parentNode.removeChild(tgt); // or tgt.remove();

            listToArray();

            for (var i = 0; i < ret.length; i++) {
                sum = +sum + +j;
            }

            average = sum / ret.length;
            sum = 0; // resets sum

            if (ret.length >= 2) {
                if (average == 1 || average == 1.0) {
                    document.getElementById("timesAverage").innerText = `Average: ${(Math.round(average * 10)) / 10} second`;
                } else {
                    document.getElementById("timesAverage").innerText = `Average: ${(Math.round(average * 10)) / 10} seconds`;
                }
            } else {
                document.getElementById("timesAverage").innerText = "";
            }
        }
    });

    document.getElementById("goalsList").addEventListener("click", function (e) {
        var tgt = e.target;
        if (tgt.tagName.toUpperCase() == "LI") {
            tgt.parentNode.removeChild(tgt); // or tgt.remove();
        }
    }); */

    function nextStep() {
        if (step == 1) {
            if (document.getElementById("memInput").value == "") {
                document.getElementById("warning").innerText = "Enter something to memorize!";
                document.getElementById("warning").style.color = darkerRed;

                document.getElementById("memInput").focus();

            } else {
                memText = document.getElementById("memInput").value;
                document.getElementById("memText").innerText = memText;

                document.getElementById("memInput").value = "";

                document.getElementById("directions").innerText = "First, read the text and type it.";

                document.getElementById("enterMemDiv").style.display = "none";
                document.getElementById("tryMemDiv").style.display = "block";

                document.getElementById("nextStepDiv").style.display = "none";

                step++;

            }

        } else if (step == 2) {
            document.getElementById("fullEnterTryMem").style.display = "none";

            document.getElementById("speakText").style.display = "block";

            document.getElementById("directions").innerText = "Now, listen to the text being spoken.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 3) {
            document.getElementById("fullEnterTryMem").style.display = "flex";

            document.getElementById("tryMemInput").value = "";

            matches = memText.match(/\b(\w)/g); // ['U','W','U']
            acronym = matches.join('___ '); // U___ W___ U
            acronym = acronym + "___"; // U___ W___ U___
            document.getElementById("memText").innerText = acronym;

            document.getElementById("speakText").style.display = "none";

            document.getElementById("directions").innerText = "Now, read the first letter of each word and type it.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 4) {
            document.getElementById("tryMemInput").value = "";
            document.getElementById("memTextDiv").style.display = "none";

            document.getElementById("directions").innerText = "Now, type the text without reading it.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 5) {
            document.getElementById("tryMemInput").value = "";

            document.getElementById("directions").innerText = "Now, type the text as fast as you can.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 6) {
            // Math.round(((time * 10) / 10) - 0.1)
            // time.toFixed(1)

            document.getElementById("tryMemInput").value = "";

            document.getElementById("directions").innerText = "Keep trying to type the text faster!";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";
            document.getElementById("timesBox").style.display = "block";

            document.getElementById("goalButton").style.display = "initial";

            /* add time to list */

            var li = document.createElement("li");
            li.className = "listEl";

            if ((Math.round(time * 10)) / 10 == 1) {
                var inputValue = `${(Math.round(time * 10)) / 10} second`;
            } else {
                var inputValue = `${(Math.round(time * 10)) / 10} seconds`;

            }

            icon = document.createElement("i");
            icon.className = "fa-solid fa-stopwatch";
            li.appendChild(icon);

            var text = document.createTextNode(inputValue);
            li.appendChild(text);

            document.getElementById("timesList").appendChild(li);

            /* */

            document.getElementById("time").style.display = "none";

            time = 0;

            start = function () {
                if (step == 6 || step == 7) {
                    start = function () { };
                    interval = setInterval(function () {
                        document.getElementById("time").style.display = "block";

                        if ((Math.round(time * 10)) / 10 == 1) {
                            document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                        } else {
                            document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                        }
                        // rounds number to tenth place, hundredth is too fast

                        if (document.getElementById("status").innerText == "Enter text to beat your record!") {
                            document.getElementById("status").style.display = "none";
                        }

                        time += 0.1;

                    }, 100);
                }
            };

            step++;

        }

        document.getElementById("tryMemInput").disabled = false;
        document.getElementById("enterTry").disabled = false;
        document.getElementById("tryMemInput").classList.remove("disabled");
        document.getElementById("enterTry").classList.remove("disabled");

        if (document.getElementById("showText").style.display == "initial") {
            document.getElementById("memTextDiv").style.display = "none";
            document.getElementById("showText").style.display = "none";
            document.getElementById("showText").innerText = "Show Text";
        }

        document.getElementById("tryMemInput").focus();

        // console.log("step " + step);
    }

    function start() {
        if (step == 6 || step == 7) {
            start = function () { };
            interval = setInterval(function () {
                document.getElementById("time").style.display = "block";

                if ((Math.round(time * 10)) / 10 == 1) {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                } else {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                }
                // rounds number to tenth place, hundredth is too fast

                if (document.getElementById("status").innerText == "Enter text to beat your record!") {
                    document.getElementById("status").style.display = "none";
                }

                time += 0.1;

            }, 100);
        }
    };

    function reset() {
        document.getElementById("tryMemInput").value = "";
        document.getElementById("time").style.display = "none";
        document.getElementById("status").style.display = "none";

        document.getElementById("enterTry").style.display = "initial";
        document.getElementById("resetTime").style.display = "none";

        document.getElementById("tryMemInput").disabled = false;
        document.getElementById("enterTry").disabled = false;
        document.getElementById("tryMemInput").classList.remove("disabled");
        document.getElementById("enterTry").classList.remove("disabled");

        document.getElementById("memTextDiv").style.display = "none";
        document.getElementById("showText").style.display = "none";
        document.getElementById("showText").innerText = "Show Text";

        document.getElementById("tryMemInput").focus();

        if (!isNaN(goal) && goal !== 0 && (Math.round(time * 10)) / 10 <= goal) {
            goal = 0;
            document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Set Goal";
        }

        if (auSeGo) {
            if (document.getElementById("timesSubtext").innerText == "") {
                goal = (Math.round((average - (average * 0.1)) * 10)) / 10;

            } else {
                goal = (Math.round((record - (0.4 * (average - record)) + (0.1 * (average))) * 10)) / 10;

            }

            if (goal <= 0 || goal > 3600) {

                if (document.getElementById("timesSubtext").innerText == "") {
                    goal = (Math.round((average - (average * 0.05)) * 10)) / 10;

                } else {
                    goal = (Math.round((record - (0.25 * (average - record)) + (0.2 * (average))) * 10)) / 10;

                }

                if (goal <= 0 || goal > 3600) {
                    goal = 0;
                }

            } else {
                if (screen.width < 1100) {
                    if (goal == 1) {
                        document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " sec.";
                    } else {
                        document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " sec.";
                    }

                } else if (screen.width >= 1100) {
                    if (goal == 1) {
                        document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " second";
                    } else {
                        document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " seconds";
                    }
                }
            }
        }

        time = 0;

        start = function () {
            if (step == 6 || step == 7) {
                start = function () { };
                interval = setInterval(function () {
                    document.getElementById("time").style.display = "block";

                    if ((Math.round(time * 10)) / 10 == 1) {
                        document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                    } else {
                        document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                    }
                    // rounds number to tenth place, hundredth is too fast

                    if (document.getElementById("status").innerText == "Enter text to beat your record!") {
                        document.getElementById("status").style.display = "none";
                    }

                    time += 0.1;

                }, 100);
            }
        };

        clearInterval(interval); // stops timer

        document.getElementById("goalButton").disabled = false;
        document.getElementById("goalButton").classList.remove("disabled");
    }

    function enterTry() {
        if (igPunc) { // changes values if ignore punctuation is on
            currentInput = document.getElementById("tryMemInput").value.toString().toLowerCase().replace(/\,/g, "").replace(/\./g, "").replace(/\!/g, "").replace(/\?/g, "").replace(/\&/g, "").replace(/\"/g, "").replace(/\'/g, "").replace(/\-/g, "").replace(/\s/g, "");
            ogInput = memText.toString().toLowerCase().replace(/\,/g, "").replace(/\./g, "").replace(/\!/g, "").replace(/\?/g, "").replace(/\&/g, "").replace(/\"/g, "").replace(/\'/g, "").replace(/\-/g, "").replace(/\s/g, "");

        } else {
            currentInput = document.getElementById("tryMemInput").value.toString().toLowerCase();
            ogInput = memText.toString().toLowerCase();

        }

        if (currentInput == ogInput) {
            document.getElementById("status").style.display = "block";

            document.getElementById("status").innerHTML = "<i class=\"fa-solid fa-circle-check\"></i>Correct!";
            document.getElementById("status").style.color = darkerGreen;

            incorrect = 0;

            if (step == 6) {
                document.getElementById("time").style.display = "block";

                if ((Math.round(time * 10)) / 10 == 1) {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                } else {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                }

                clearInterval(interval); // stops timer

                listToArray();

                document.getElementById("nextStepDiv").style.display = "block";

            } else if (step == 7) {
                document.getElementById("time").style.display = "block";

                if ((Math.round(time * 10)) / 10 == 1) {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                } else {
                    document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                }

                recentTime = (Math.round(time * 10)) / 10;

                /* add time to list */

                li = document.createElement("li");
                li.className = "listEl";

                if ((Math.round(time * 10)) / 10 == 1) {
                    inputValue = `${(Math.round(time * 10)) / 10} second`;
                } else {
                    inputValue = `${(Math.round(time * 10)) / 10} seconds`;

                }

                icon = document.createElement("i");
                icon.className = "fa-solid fa-stopwatch";
                li.appendChild(icon);

                text = document.createTextNode(inputValue);
                li.appendChild(text);

                document.getElementById("timesList").appendChild(li);

                /* */

                listToArray();

                fasterThanAll = 0;

                for (var i = 0; i < ret.length; i++) {
                    j = ret[i];

                    sum = +sum + +j;

                    if ((Math.round(time * 10)) / 10 <= j) { // current time less than or equal to time looked at in array
                        fasterThanAll++; // should increase every time it sees the time is less than another time
                    }
                }

                average = sum / ret.length;
                sum = 0; // resets sum

                if (fasterThanAll == ret.length) { // should be equal to length of array if all other times are greater, probably ------ get rid of word "seconds" in first time put into list to fix it not looking at all times in list
                    document.getElementById("status").style.display = "block";

                    document.getElementById("status").innerHTML = "<i class=\"fa-solid fa-circle-check\"></i>Correct! New record!";
                    document.getElementById("status").style.color = lightRed;

                    if ((Math.round(time * 10)) / 10 == 1) {
                        document.getElementById("timesSubtext").innerHTML = `<i class="fa-solid fa-stopwatch"></i>Record: ${(Math.round(time * 10)) / 10} second`;
                    } else {
                        document.getElementById("timesSubtext").innerHTML = `<i class="fa-solid fa-stopwatch"></i>Record: ${(Math.round(time * 10)) / 10} seconds`;
                    }

                    record = (Math.round(time * 10)) / 10;
                }

                if (ret.length >= 2) {
                    if (average == 1 || average == 1.0) {
                        document.getElementById("timesAverage").innerHTML = `<i class="fa-solid fa-stopwatch"></i>Average: ${(Math.round(average * 10)) / 10} second`;
                    } else {
                        document.getElementById("timesAverage").innerHTML = `<i class="fa-solid fa-stopwatch"></i>Average: ${(Math.round(average * 10)) / 10} seconds`;
                    }
                }

                if (!isNaN(goal) && goal !== 0 && (Math.round(time * 10)) / 10 <= goal) { // if the goal is a number (not null) and is not 0 and the time is less than the goal
                    document.getElementById("status").style.display = "block";

                    document.getElementById("status").innerHTML = "<i class=\"fa-solid fa-circle-check\"></i>Correct! You reached your goal!";
                    document.getElementById("status").style.color = lightRed;

                    li = document.createElement("li");
                    li.className = "listEl";

                    if ((Math.round(time * 10)) / 10 == 1) {
                        sec = `${(Math.round(time * 10)) / 10} second`;
                    } else {
                        sec = `${(Math.round(time * 10)) / 10} seconds`;
                    }

                    goalSec = document.getElementById("goalButton").innerText.replace("Goal: ", "");

                    icon = document.createElement("i");
                    icon.className = "fa-solid fa-bullseye";
                    li.appendChild(icon);

                    text = document.createTextNode(goalSec);
                    li.appendChild(text);

                    li.appendChild(document.createElement("br"));

                    icon = document.createElement("i");
                    icon.className = "fa-solid fa-stopwatch";
                    li.appendChild(icon);

                    text = document.createTextNode(sec);
                    li.appendChild(text);

                    document.getElementById("goalsList").appendChild(li);

                    document.getElementById("goalsSubtext").style.display = "none";

                }

                clearInterval(interval); // stops timer

                document.getElementById("enterTry").style.display = "none";
                document.getElementById("resetTime").style.display = "initial";

                document.getElementById("goalButton").disabled = true;
                document.getElementById("goalButton").classList.add("disabled");

            } else {
                document.getElementById("nextStepDiv").style.display = "block";
            }

            if (document.getElementById("status").innerText == "Enter text to beat your record!") {
                document.getElementById("status").style.display = "none";
            }

            document.getElementById("tryMemInput").disabled = true;
            document.getElementById("enterTry").disabled = true;
            document.getElementById("tryMemInput").classList.add("disabled");
            document.getElementById("enterTry").classList.add("disabled");

            document.getElementById("tryMemInput").blur();

        } else if (step == 7 && document.getElementById("tryMemInput").value == "") {
            document.getElementById("status").style.display = "block";

            document.getElementById("status").innerText = "Enter text to beat your record!";
            document.getElementById("status").style.color = darkerRed;

        } else {
            document.getElementById("status").style.display = "block";

            document.getElementById("status").innerHTML = "<i class=\"fa-solid fa-circle-xmark\"></i>Incorrect!";
            document.getElementById("status").style.color = darkerRed;

            incorrect++;

            if (step == 4 || step == 5 || step == 6 || step == 7) {
                if (incorrect >= incLimit) {
                    document.getElementById("showText").style.display = "initial";

                }
            }
        }
    }

    /* this converts list to array (ret) somehow */

    function listToArray() {
        listItems = document.getElementById('timesList').getElementsByTagName('li'),

            myArray = map(listItems, getText);
    }

    function map(arrayLike, fn) {
        ret = [];
        i = -1;
        len = arrayLike.length;
        while (++i < len) ret[i] = fn(arrayLike[i]);

        return ret;
    }

    function getText(node) {
        if (node.nodeType === 3) return node.data;
        txt = '';
        if (node = node.firstChild) do {
            txt += getText(node);

        } while (node = node.nextSibling);

        txt = txt.replace('seconds', '').replace('second', ''); //replaces the word "second" to compare the times

        return txt;
    }

    /* */

    function speak() {
        var msg = new SpeechSynthesisUtterance();
        msg.text = memText;
        window.speechSynthesis.speak(msg);

        document.getElementById("nextStepDiv").style.display = "block";
    }

    function showText() {
        if (document.getElementById("showText").innerText == "Show Text") {
            document.getElementById("memText").innerText = memText; // for step 4
            document.getElementById("memTextDiv").style.display = "flex";
            document.getElementById("showText").innerText = "Hide Text";

        } else {
            document.getElementById("showText").innerText = "Show Text";

            if (step == 4) {
                document.getElementById("memText").innerText = acronym;
            } else {
                document.getElementById("memTextDiv").style.display = "none";
            }
        }
    }

    function toggleIgPunc() {
        if (igPunc == false) {
            igPunc = true;
            document.getElementById("ignorePunc").innerText = "Ignore Punctuation: On";
        } else {
            igPunc = false;
            document.getElementById("ignorePunc").innerText = "Ignore Punctuation: Off";
        }
    }

    function toggleSetGoal() {
        if (auSeGo == false) {
            auSeGo = true;
            document.getElementById("autoSetGoal").innerText = "Auto Set Goal: On";
        } else {
            auSeGo = false;
            document.getElementById("autoSetGoal").innerText = "Auto Set Goal: Off";
        }
    }

    function changeIncLim() {
        if (incLimit < 8) {
            incLimit++;
        } else {
            incLimit = 1;
        }

        document.getElementById("incorrectLimit").innerText = "Incorrect Limit: " + incLimit;
    }

    function setGoal() {
        let userEntered = prompt("Enter a number to set your goal");

        if (userEntered == null || userEntered == "") {
            return;

        } else if (isNaN(userEntered)) {
            alert("Please enter a number");

        } else if (userEntered <= 0) {
            alert("Please enter a number above zero");

        } else if (userEntered > 3600) {
            alert("Please enter a lower number");

        } else {
            goal = (Math.round(userEntered * 10)) / 10;

            if (screen.width < 1100) {
                if (goal == 1) {
                    document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " sec.";
                } else {
                    document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " sec.";
                }

            } else if (screen.width >= 1100) {
                if (goal == 1) {
                    document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " second";
                } else {
                    document.getElementById("goalButton").innerHTML = "<i class=\"fa-solid fa-bullseye\"></i>Goal: " + goal + " seconds";
                }
            }

            auSeGo = false;
            document.getElementById("autoSetGoal").innerText = "Auto Set Goal: Off";
        }
    }

    function showOps() {
        if (document.getElementById("optionsDiv").style.display == "flex") {
            document.getElementById("optionsDiv").style.display = "none";

            document.getElementById("showOptions").style.boxShadow = "none";

            document.getElementById("showOptions").style.borderBottomLeftRadius = "5px";
            document.getElementById("showOptions").style.borderBottomRightRadius = "5px";

            if (document.getElementById("memInput").value == "ravioli ravioli give me the formuoli" || document.getElementById("tryMemInput").value == "ravioli ravioli give me the formuoli") {
                document.getElementById("devButton").style.display = "block";
            }

        } else {
            document.getElementById("optionsDiv").style.display = "flex";

            document.getElementById("showOptions").style.boxShadow = "0 5px 10px 0 #8f313173";

            document.getElementById("showOptions").style.borderBottomLeftRadius = "0";
            document.getElementById("showOptions").style.borderBottomRightRadius = "0";
        }
    }

    function editText() {
        document.getElementById("memEditText").value = memText;

        document.getElementById("memEditText").style.display = "flex";
        document.getElementById("memText").style.display = "none";

        document.getElementById("editMemText").style.display = "none";
        document.getElementById("saveMemText").style.display = "flex";
        document.getElementById("closeMemText").style.display = "flex";

        document.getElementById("tryMemInput").disabled = true;
        document.getElementById("enterTry").disabled = true;
        document.getElementById("nextStep").disabled = true;
        document.getElementById("tryMemInput").classList.add("disabled");
        document.getElementById("enterTry").classList.add("disabled");
        document.getElementById("nextStep").classList.add("disabled");

        document.getElementById("memTextDiv").style.borderBottomColor = "#3c8b91";

        document.getElementById("memEditText").focus();
    }

    function saveText() {
        document.getElementById("memEditText").style.display = "none";
        document.getElementById("memText").style.display = "flex";

        memText = document.getElementById("memEditText").value;
        document.getElementById("memText").innerText = memText;

        document.getElementById("editMemText").style.display = "flex";
        document.getElementById("saveMemText").style.display = "none";
        document.getElementById("closeMemText").style.display = "none";

        if (document.getElementById("nextStepDiv").style.display !== "block") {
            document.getElementById("tryMemInput").disabled = false;
            document.getElementById("enterTry").disabled = false;
            document.getElementById("tryMemInput").classList.remove("disabled");
            document.getElementById("enterTry").classList.remove("disabled");
        }

        document.getElementById("nextStep").disabled = false;
        document.getElementById("nextStep").classList.remove("disabled");

        document.getElementById("memTextDiv").style.borderBottomColor = "transparent";

        document.getElementById("memEditText").innerText = memText;
        document.getElementById("memEditText").blur();

        if (document.getElementById("nextStepDiv").style.display == "block") {
            document.getElementById("nextStep").focus();
        } else if (document.getElementById("fullEnterTryMem").style.display !== "none") {
            document.getElementById("tryMemInput").focus();
        } else {
            document.getElementById("speakText").focus();
        }
    }

    function closeText() {
        document.getElementById("memEditText").style.display = "none";
        document.getElementById("memText").style.display = "flex";

        document.getElementById("editMemText").style.display = "flex";
        document.getElementById("saveMemText").style.display = "none";
        document.getElementById("closeMemText").style.display = "none";

        if (document.getElementById("nextStepDiv").style.display !== "block") {
            document.getElementById("tryMemInput").disabled = false;
            document.getElementById("enterTry").disabled = false;
            document.getElementById("tryMemInput").classList.remove("disabled");
            document.getElementById("enterTry").classList.remove("disabled");
        }

        document.getElementById("nextStep").disabled = false;
        document.getElementById("nextStep").classList.remove("disabled");

        document.getElementById("memTextDiv").style.borderBottomColor = "transparent";

        document.getElementById("memEditText").innerText = memText;
        document.getElementById("memEditText").blur();

        if (document.getElementById("nextStepDiv").style.display == "block") {
            document.getElementById("nextStep").focus();
        } else if (document.getElementById("fullEnterTryMem").style.display !== "none") {
            document.getElementById("tryMemInput").focus();
        } else {
            document.getElementById("speakText").focus();
        }
    }

    document.body.onkeyup = function (event) {
        if (event.keyCode == 13) {
            if (document.getElementById("memInput") === document.activeElement && (document.getElementById("tryMemInput") === document.activeElement) == false && (document.getElementById("memEditText") === document.activeElement) == false) {
                document.getElementById("nextStep").click(); // clicks next for 1st step
                // next clicked b/c 1st input was active, 2nd and edit was not

            } else if (document.getElementById("tryMemInput") === document.activeElement && (document.getElementById("memInput") === document.activeElement) == false && (document.getElementById("memEditText") === document.activeElement) == false) {
                document.getElementById("enterTry").click(); // clicks enter
                // enter clicked b/c 2nd input was active, 1st and edit was not

            } else if (document.getElementById("memEditText") === document.activeElement && (document.getElementById("memInput") === document.activeElement) == false && (document.getElementById("tryMemInput") === document.activeElement) == false) {
                document.getElementById("saveMemText").click(); // clicks save edit
                // enter clicked b/c edit input was active, 1st and 2nd was not

            } else if (document.getElementById("nextStepDiv").style.display == "block") {
                document.getElementById("nextStep").click(); // clicks next for all steps except 1st step
                // next clicked b/c nextstepdiv was visible

            } else if (document.getElementById("speakText").style.display == "block") {
                document.getElementById("speakText").click(); // clicks speak
                // speak clicked b/c speak button was visible

            } else if (document.getElementById("resetTime").style.display == "initial" && document.getElementById("enterTry").style.display == "none") {
                document.getElementById("resetTime").click(); // clicks reset
                // reset clicked b/c resettime button was visible

            }

        } else if (event.keyCode == 27) {
            if (document.getElementById("memEditText") === document.activeElement) {
                document.getElementById("closeMemText").click(); // clicks close edit
            }
        }
    }

    function devThing() {
        if (step == 7) {
            step = 0;
            document.getElementById("memTextDiv").style.display = "none";

            document.getElementById("directions").innerText = "";

            document.getElementById("enterMemDiv").style.display = "block";
            document.getElementById("tryMemDiv").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "block";

            step++;

        } else if (step == 1) {
            memText = document.getElementById("memInput").value;
            document.getElementById("memText").innerText = memText;

            document.getElementById("directions").innerText = "First, read the text and type it.";

            document.getElementById("enterMemDiv").style.display = "none";
            document.getElementById("tryMemDiv").style.display = "block";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 2) {
            document.getElementById("fullEnterTryMem").style.display = "none";

            document.getElementById("speakText").style.display = "block";

            document.getElementById("directions").innerText = "Now, listen to the text being spoken.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 3) {
            document.getElementById("fullEnterTryMem").style.display = "flex";

            document.getElementById("tryMemInput").value = "";

            matches = memText.match(/\b(\w)/g); // ['U','W','U']
            acronym = matches.join('___ '); // U___ W___ U
            acronym = acronym + "___"; // U___ W___ U___
            document.getElementById("memText").innerText = acronym;

            document.getElementById("speakText").style.display = "none";

            document.getElementById("directions").innerText = "Now, read the first letter of each word and type it.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 4) {
            document.getElementById("tryMemInput").value = "";
            document.getElementById("memTextDiv").style.display = "none";

            document.getElementById("directions").innerText = "Now, type the text without reading it.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 5) {
            document.getElementById("tryMemInput").value = "";

            document.getElementById("directions").innerText = "Now, type the text as fast as you can.";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";

            step++;

        } else if (step == 6) {
            // Math.round(((time * 10) / 10) - 0.1)
            // time.toFixed(1)

            document.getElementById("tryMemInput").value = "";

            document.getElementById("directions").innerText = "Keep trying to type the text faster!";

            document.getElementById("status").style.display = "none";

            document.getElementById("nextStepDiv").style.display = "none";
            document.getElementById("timesBox").style.display = "block";

            document.getElementById("goalButton").style.display = "initial";

            /* add time to list */

            var li = document.createElement("li");
            if ((Math.round(time * 10)) / 10 == 1) {
                var inputValue = `${(Math.round(time * 10)) / 10} second`;
            } else {
                var inputValue = `${(Math.round(time * 10)) / 10} seconds`;

            }
            var text = document.createTextNode(inputValue);
            li.appendChild(text);

            document.getElementById("timesList").appendChild(li);

            /* */

            document.getElementById("time").style.display = "none";

            time = 0;

            start = function () {
                if (step == 6 || step == 7) {
                    start = function () { };
                    interval = setInterval(function () {
                        document.getElementById("time").style.display = "block";

                        if ((Math.round(time * 10)) / 10 == 1) {
                            document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} second`;
                        } else {
                            document.getElementById("time").innerHTML = `<i class="fa-solid fa-stopwatch"></i>${(Math.round(time * 10)) / 10} seconds`;

                        }
                        // rounds number to tenth place, hundredth is too fast

                        if (document.getElementById("status").innerText == "Enter text to beat your record!") {
                            document.getElementById("status").style.display = "none";
                        }

                        time += 0.1;

                    }, 100);
                }
            };

            step++;

        }

        document.getElementById("devButton").innerText = "step: " + step;
    }

</script>

</html>